<!DOCTYPE html>
<html lang="en"><head>
<script src="CPA_2025_files/libs/clipboard/clipboard.min.js"></script>
<script src="CPA_2025_files/libs/quarto-html/tabby.min.js"></script>
<script src="CPA_2025_files/libs/quarto-html/popper.min.js"></script>
<script src="CPA_2025_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="CPA_2025_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="CPA_2025_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="CPA_2025_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <meta name="author" content="Gaylen Fronk, Jiachen Yu, John J. Curtin">
  <meta name="dcterms.date" content="2025-04-03">
  <title>Lagged predictions of next day alcohol use for personalized continuing care support</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="CPA_2025_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="CPA_2025_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="CPA_2025_files/libs/revealjs/dist/theme/quarto-2f366650f320edcfcf53d73c80250a32.css">
  <link rel="stylesheet" href="slides.css">
  <link href="CPA_2025_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="CPA_2025_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="CPA_2025_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="CPA_2025_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lagged predictions of next day alcohol use for personalized continuing care support</h1>
  <p class="subtitle">Kendra Wyant</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Gaylen Fronk, Jiachen Yu, John J. Curtin 
</div>
        <p class="quarto-title-affiliation">
            University of Wisconsin-Madison
          </p>
    </div>
</div>

  <p class="date">2025-04-03</p>
</section>
<section id="alcohol-use-disorder" class="slide level2">
<h2>Alcohol Use Disorder</h2>
<div class="columns">
<div class="column" style="width:70%;">
<ul>
<li>Chronic condition</li>
</ul>
<div class="fragment">
<ul>
<li>Initial treatments are effective</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Continuing care is gold-standard for chronic conditions</li>
</ul>
</div>
</div><div class="column" style="width:30%;">
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/crowd.png?raw=true" class="absolute" style="top: 0px; right: 0px; height: 100%; "></p>
</div></div>
<aside class="notes">
<p>Alcohol use disorder is a chronic condition with high relapse rates, substantial co-morbidity mental and physical health issues, and increased mortality risk.</p>
<p>While initial treatments—such as medication and evidence-based psychosocial interventions—are effective, many individuals never receive treatment. Even those who do often face a critical gap in care once initial treatment ends.</p>
<p>Continuing care, including on-going monitoring, adaptive support, and when necessary re-engagement with more intensive treatment, is the gold standard for chronic conditions, like diabetes and hypertension. Similarly, alcohol use treatment is most effective when provided over longer durations with active efforts to keep patients engaged in their recovery.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="alcohol-use-disorder-1" class="slide level2">
<h2>Alcohol Use Disorder</h2>
<ul>
<li>Continuing care is lacking for alcohol use disorder</li>
</ul>
<div class="fragment">
<ul>
<li>Risk factors are individualized, numerous, dynamic, and interactive</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Optimal supports to address risk factors vary across individuals and within an individual over time</li>
</ul>
</div>
<aside class="notes">
<p>Yet, our current treatment system does not appear to have the capacity for long-term clinician-delivered care, nor is that the focus. Several barriers contribute to this discontinuity, including cost and insurance reimbursement issues, lack of collaborative provider teams, passive referral processes, geographic barriers, patient dropout, and changes in clinical needs over time.</p>
<p>As a result, individuals are often left to ask themselves: “How can I best support my recovery today?”</p>
<p>The challenge is that risk factors for relapse are highly individualized, dynamic, and interactive — making self-monitoring difficult.</p>
<p>The optimal supports to address these risk factors vary both across individuals and within an individual over time.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="recovery-monitoring-and-support-system" class="slide level2">
<h2>Recovery Monitoring and Support System</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<ul>
<li>Personalized adaptive recommendations</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Prompt individuals to engage with support at times of high risk</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/sensingsystem.png?raw=true"></p>
</div>
</div></div>
<aside class="notes">
<p>An algorithm-guided recovery monitoring and support system could help individuals monitor their current and future risk of lapse, or goal-inconsistent alcohol use, after initial treatment and adjust their lifestyle, behaviors and support as needed.</p>
<p>Such a tool could offer personalized, adaptive recommendations aligned with evidenced-based care and prompt individuals to engage with support at times of high risk.</p>
<p>For example, individuals could receive daily messages about changes in their lapse risk, along with tailored recommendations based on key risk factors, like an urge-surfing activity for someone experiencing strong cravings.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="recovery-monitoring-and-support-system-1" class="slide level2">
<h2>Recovery Monitoring and Support System</h2>
<div class="columns">
<div class="column" style="width:49%;">
<div>
<ul>
<li>Personalized adaptive recommendations<br>
</li>
</ul>
</div>
<div>
<ul>
<li>Prompt individuals to engage with support at times of high risk</li>
</ul>
</div>
<div>
<ul>
<li>Scalable to address unmet need</li>
</ul>
</div>
</div><div class="column" style="width:1%;">

</div><div class="column" style="width:50%;">
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/sensingsystem.png?raw=true"></p>
</div></div>
<aside class="notes">
<p>Moreover, it would provide a scalable option for long-term monitoring to address the substantial unmet need for continuing care for alcohol use disorder.</p>
<p>For such a system to exist, we need two things. One, the system must be able to collect a rich and densely sampled source (or sources) of risk-relevant data.</p>
<p>Two, the system must have access to a model that can predict alcohol use with high performance and have interpretable model inputs for support recommendations to be mapped onto.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="machine-learning-and-digital-data" class="slide level2">
<h2>Machine Learning and Digital Data</h2>
<div class="fragment">
<ul>
<li>High dimensional feature sets</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Non-linear and interactive relationships between features and lapse risk probability</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Interpretability of feature importance</li>
</ul>
</div>
<aside class="notes">
<p>Advances in both smartphone sensing of digital data and machine learning now make this possible. Smartphone sensing approaches (e.g., ecological momentary assessment, geolocation sensing) can provide the frequent, longitudinal measurement of risk factors necessary for temporally precise prediction.</p>
<p>Machine learning models can handle high dimensional feature sets. They can accommodate non-linear and interactive relationships between features and lapse risk probability. Additionally, methods from interpretable machine learning can be used to understand which risk features contribute most strongly to a lapse prediction.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ecological-momentary-assessment" class="slide level2">
<h2>Ecological Momentary Assessment</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Direct and frequent insight into subjective feelings and experiences</li>
</ul>
<div class="fragment">
<ul>
<li>Constructs easily map onto well-studied risk factors for lapse</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Appears to be well-tolerated</li>
</ul>
</div>
</div><div class="column" style="width:40%;">
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/ema.png?raw=true" class="absolute" style="top: 0px; right: 0px; height: 100%; "></p>
</div></div>
<aside class="notes">
<p>EMA may be one promising sensing method for lapse prediction.</p>
<p>It offers direct and frequent insight into subjective feelings and experiences that can be easily mapped onto modular forms of treatment like the relapse prevention model</p>
<p>Furthermore, individuals with SUDs have found EMA to be acceptable for sustained measurement for up to a year with relatively high compliance, suggesting that this method is feasible for long-term monitoring throughout recovery.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="study-goals" class="slide level2">
<h2>Study Goals</h2>
<p>Use EMA to:</p>
<ol type="1">
<li>Predict <span style="color: #c5050c;"><strong>immediate risk</strong></span> of a lapse back to alcohol use (i.e., in the next 24 hours)</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>Predict <span style="color: #c5050c;"><strong>future risk</strong></span> of a lapse back to alcohol use (i.e., in a 24 hour window 2 weeks from now)</li>
</ol>
</div>
<aside class="notes">
<p>In this study our goal was to predict immediate and future lapse risk for improving adaptive, tailored continuing care support.</p>
<p>To do this we built two models using EMA data.</p>
<p>Our first model predicts immediate risk of a lapse back to alcohol use (anytime in the next 24 hours).</p>
<p>This model could be updated daily to provide individuals information about changes in their risk and make supportive recommendations for immediate action based on the top features.</p>
<p>Earlier I gave the example of an urge surfing recommendation for someone with strong cravings. This could also include recommending a guided relaxation video when someone is reporting recent stressful events or offering encouragement when someone has gone a certain length of time without drinking.</p>
<p>Importantly, this assumes that the recommendations can be implemented immediately, likely in a smartphone app.</p>
<p>But the best recommendation might not be able to be done immediately. Imagine trying to schedule a therapy appointment in the next 24 hours!</p>
<p>Therefore, we also fit a second model to predict future risk of a lapse back to alcohol use. For this model we shifted the 24 hour prediction window 2-weeks into the future. So essentially this model predicts the probability that someone will lapse in a 24 hour window two weeks from now.</p>
<p>These “time-lagged” predictions could give people advanced warning to implement supports not immediately available to them.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="design" class="slide level2">
<h2>Design</h2>
<ul>
<li>3-month longitudinal study</li>
<li>Participants completed 4 surveys daily
<ul>
<li>Craving, arousal, valence</li>
<li>Past stressful events, risky situations, pleasant events</li>
<li>Future stressful events, risky situations, efficacy</li>
<li>Alcohol use</li>
</ul></li>
</ul>
<aside class="notes">
<p>Participants completed 4 daily surveys for up to three months</p>
<p>Each survey had 10 items that asked about The greatest intensity of craving, arousal, and valence since the last survey.</p>
<p>Stressful events, risky situations and pleasant events encountered since their last survey</p>
<p>Future stressful events, risky situations and efficacy looking in the next week</p>
<p>And any alcohol use they had not yet reported.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="design-1" class="slide level2">
<h2>Design</h2>
<ul>
<li>3-month longitudinal study</li>
<li>Participants completed 4 surveys daily
<ul>
<li>Craving, arousal, valence</li>
<li>Past stressful events, risky situations, pleasant events</li>
<li>Future stressful events, risky situations, efficacy</li>
<li>Alcohol use</li>
</ul></li>
<li>Outcome = lapse or no lapse</li>
<li>XGBoost algorithm</li>
<li>Grouped nested k-fold cross-validation</li>
</ul>
<aside class="notes">
<p>We used all 10 EMA items plus 7 demographic questions to engineer our features, which serve as the inputs to our model.<br>
Time and day of alcohol was used to generate our outcome labels of lapse or no lapse.<br>
Our statistical algorithm was XGBoost.<br>
We used grouped nested k-fold cross-validation as our resampling method to ensure our models were evaluated on new data from new individuals</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="participants-n-151" class="slide level2">
<h2>Participants (<em>N</em> = 151)</h2>
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/ema_demographics.qmd" data-notebook-title="EMA demographics fig" data-notebook-cellid="cell-fig-demographics-1">
<div id="cell-fig-demographics-1" class="cell" data-fig-height="5.75" data-fig-width="12">
<div class="cell-output cell-output-display">
<div id="fig-demographics-1" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-demographics-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="CPA_2025_files/figure-revealjs/..-notebooks-ema_demographics-fig-demographics-1-output-1.png" id="fig-demographics-1">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-demographics-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>Our sample consisted of 151 participants with moderate to severe alcohol use disorder living in the Madison, WI area.</p>
<p>Our sample was predominantly non-Hispanic White. We had equal representation of men and women.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="participants-n-151-1" class="slide level2">
<h2>Participants (<em>N</em> = 151)</h2>
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/ema_demographics.qmd" data-notebook-title="EMA demographics fig" data-notebook-cellid="cell-fig-demographics-2">
<div id="cell-fig-demographics-2" class="cell" data-fig-height="5.75" data-fig-width="12">
<div class="cell-output cell-output-display">
<div id="fig-demographics-2" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-demographics-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="CPA_2025_files/figure-revealjs/..-notebooks-ema_demographics-fig-demographics-2-output-1.png" id="fig-demographics-2">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-demographics-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>the average age was 41 years.</p>
<p>All of our participants had a goal of abstinence which made it easier for us to identify discrete lapse onsets.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="adherence" class="slide level2">
<h2>Adherence</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/burden_analyses.qmd" data-notebook-title="EMA Analyses" data-notebook-cellid="cell-compliance">
<div id="cell-compliance" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-burden_analyses-compliance-output-1.png" id="compliance"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>3.1 of 4 surveys completed daily (78.4% compliance)</li>
<li>95% compliance for completing at least one survey daily</li>
</ul>
</div></div>
<aside class="notes">
<p>Participants on average completed 3 of the 4 EMAs each day. Participants completed at least one EMA on 95.0% of days.</p>
<p>The plot on the left shows the percentage of EMA completion looking at the full 4x daily protocol (in red) and completion of at least 1x daily EMA (in grey) over the number of weeks on study. We found participants on average were able to sustain EMA adherence over the full three months.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="model-performance" class="slide level2">
<h2>Model Performance</h2>
<div class="cols">
<div class="column" style="width:20%;">

</div><div class="column" style="width:50%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-none">
<div id="cell-pp-none" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-none-output-1.png" id="pp-none"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:30%;">

</div></div>
<aside class="notes">
<p>We used area under the roc curve to evaluate model performance. auroc is the probability that a randomly selected positive case will be assigned a higher probability compared to a randomly selected negative case. Scores can range from .5, Chance performance - 1, perfect performance.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="model-performance-1" class="slide level2">
<h2>Model Performance</h2>
<div class="cols">
<div class="column" style="width:20%;">

</div><div class="column" style="width:50%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-nolag">
<div id="cell-pp-nolag" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-nolag-output-1.png" id="pp-nolag"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:30%;">

</div></div>
<aside class="notes">
<p>here is the distribution of posterior probabilities for auroc for the no lag model. The median posterior probability was .90 (depicted as the vertical solid line). The Horizonatal line depicts the 95% Bayesian credible interval. This interval was relatively narrow and did not contain .5.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="model-performance-2" class="slide level2">
<h2>Model Performance</h2>
<div class="cols">
<div class="column" style="width:20%;">

</div><div class="column" style="width:50%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp">
<div id="cell-pp" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-output-1.png" id="pp"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:30%;">
<div class="fragment">
<p><span style="font-size: 25px;">Median auROC difference:</span></p>
<p><span style="font-size: 25px;">0.063 [0.053, 0.073]</span></p>
<p><span style="font-size: 25px;">Probability that models differ = 1</span></p>
</div>
</div></div>
<aside class="notes">
<p>Here is the distribution for the two week model. Median posterior probability for auroc was .84.</p>
<p>The median difference in posterior probability for these two models was .06, and there was a 1.0 probability that the lagged model performed worse than the no lag model. However, auROCs of .8 and higher are generally considered to indicate good performance.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="feature-importance" class="slide level2">
<h2>Feature Importance</h2>
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-global">
<div id="cell-global" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-global-output-1.png" id="global"></p>
</figure>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>We can use feature importance values to contextualize model performance.</p>
<p>This plot shows on average, across all participants and all observations, how much each feature category contributes to the model’s predictions.</p>
<p>On the y-axis Feature categories are ordered by their aggregate importance across the two models. The importance of each feature category on the x-axis is displayed separately by color for each model.</p>
<p>The relative ordering of important features remained somewhat consistent across the two models. Past use, future efficacy, and craving were the top three features for both models. However on average features were less important for the two week model, consistent with its lower performance.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="feature-importance-1" class="slide level2">
<h2>Feature Importance</h2>
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-local">
<div id="cell-local" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-local-output-1.png" id="local"></p>
</figure>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>When it comes to making a personalized recommendation for a recovery activity or support, we want to know what feature category is most important for a specific individual on a specific day. In other words, What does this individual need right now?</p>
<p>This figure shows the range of all individual feature importance values across all people and all days.</p>
<p>This plot suggests that even feature categories with low average importance (e.g., past pleasant event) have a wide range of individual importance values, suggesting that for seem people at some moments these features are clinically important.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="model-fairness" class="slide level2">
<h2>Model Fairness</h2>
<div class="fragment">
<div class="cols">
<div class="column" style="width:33%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-dem-no-lag-race">
<div id="cell-pp-dem-no-lag-race" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-dem-no-lag-race-output-1.png" id="pp-dem-no-lag-race"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-dem-no-lag-income">
<div id="cell-pp-dem-no-lag-income" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-dem-no-lag-income-output-1.png" id="pp-dem-no-lag-income"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">

</div></div>
</div>
<aside class="notes">
<p>In this study we also looked at how fair our models were for three dichotomized demographic groups with known disparities in access to substance use treatment and substance use outcomes – race and ethnicity (not White vs.&nbsp;non-Hispanic White), income (below poverty vs.&nbsp;above poverty), and sex at birth (female vs.&nbsp;male).</p>
<p>Our models performed worse for participants who were not white and had an income below the federal poverty line.</p>
<p>The largest contributing factor is likely the lack of diversity in our training data.</p>
<p>Even with our coarse dichotomous grouping of race we only had 20 participants in the not White group (compared to 131 in the White group). We also saw a similar pattern in our income groups (with 49 people in the below poverty group and 102 people in the above poverty group).</p>
<p>In just a moment I’m going to return to this issue and discuss what we are currently doing to address this.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="model-fairness-1" class="slide level2">
<h2>Model Fairness</h2>
<div class="cols">
<div class="column" style="width:33%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-dem-no-lag-race">
<div id="cell-pp-dem-no-lag-race" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-dem-no-lag-race-output-1.png" id="pp-dem-no-lag-race"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-dem-no-lag-income">
<div id="cell-pp-dem-no-lag-income" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-dem-no-lag-income-output-1.png" id="pp-dem-no-lag-income"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-dem-no-lag-sex">
<div id="cell-pp-dem-no-lag-sex" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-dem-no-lag-sex-output-1.png" id="pp-dem-no-lag-sex"></p>
</figure>
</div>
</div>
</div>
</div>
</div></div>
<aside class="notes">
<p>We did however have equal representation of men and women, and we still saw differences in performance. We are not sure exactly why this is. We did choose our EMA items based on domain expertise and years of lapse and relapse risk research. It is possible that these constructs more precisely describe lapse risk factors for men than for women. This could mean that more research is needed to identify lapse risk factors for women (and other groups underrepresented in the literature more broadly).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="model-fairness-2" class="slide level2">
<h2>Model Fairness</h2>
<div class="cols">
<div class="column" style="width:33%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-dem-lag-race">
<div id="cell-pp-dem-lag-race" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-dem-lag-race-output-1.png" id="pp-dem-lag-race"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-dem-lag-income">
<div id="cell-pp-dem-lag-income" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-dem-lag-income-output-1.png" id="pp-dem-lag-income"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="quarto-embed-nb-cell" data-notebook="/Users/kendrawyant/presentations/notebooks/lag_figs.qmd" data-notebook-title="Make All Figures for Main Manuscript" data-notebook-cellid="cell-pp-dem-lag-sex">
<div id="cell-pp-dem-lag-sex" class="cell">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="CPA_2025_files/figure-revealjs/..-notebooks-lag_figs-pp-dem-lag-sex-output-1.png" id="pp-dem-lag-sex"></p>
</figure>
</div>
</div>
</div>
</div>
</div></div>
<aside class="notes">
<p>And we saw this pattern with the lagged model as well.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="conclusions" class="slide level2">
<h2>Conclusions</h2>
<ul>
<li>We can achieve clinically meaningful performance up to 2 weeks out</li>
</ul>
<div class="fragment">
<ul>
<li>Advanced notice for treatment supports that are not immediately available</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>A more representative training sample is critical for developing fair models</li>
</ul>
</div>
<aside class="notes">
<p>In conclusion, Our models performed exceptionally well with median posterior probabilities for auROCs of .84 - .90. This suggests we can achieve clinically meaningful performance up to two weeks out.</p>
<p>Model performance did decrease when prediction windows were shifted further into the future. This is not surprising given what we know about prediction and alcohol lapse. Many important lapse risk factors are fluctuating processes that can change day-by-day, if not more frequently. So when looking 2-weeks out, features are less proximal to the start of the prediction window. Still, the benefit of advanced notice of lapse risk likely outweighs the cost to performance.</p>
<p>Finally, these models are not yet clinically implementable. The most notable flaw being the unfairness of model performance for non-majority groups.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="current-future-directions" class="slide level2">
<h2>Current Future Directions</h2>
<ul>
<li>Improve our models by adding more diverse training data</li>
</ul>
<aside class="notes">
<p>This is the first thing we are working to address in current future directions.</p>
<p>We are in the process of collecting data from a more diverse sample of individuals with alcohol use disorder to improve our models. And we are optimistic about this.</p>
<p>In EMA models from our lab that predict opioid lapses we have found that an adequately diverse sample resulted in comparative performance across these same groups.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="current-future-directions-1" class="slide level2">
<h2>Current Future Directions</h2>
<ul>
<li><p>Improve our models by adding more diverse training data</p></li>
<li><p>Optimize the delivery of risk-relevant feedback</p></li>
</ul>
<div class="fragment">
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/bubble_1.png?raw=true" class="absolute" style="left: 100px; width: 22%; "></p>
</div>
<div class="fragment">
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/bubble_2.png?raw=true" class="absolute" style="left: 250px; bottom: 10px; width: 35%; "></p>
</div>
<div class="fragment">
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/bubble_3.png?raw=true" class="absolute" style="right: 300px; width: 30%; "></p>
</div>
<div class="fragment">
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/bubble_4.png?raw=true" class="absolute" style="bottom: 10px; right: 40px; width: 30%; "></p>
</div>
<aside class="notes">
<p>Returning again to the idea that these models will be most effective embedded in a recovery monitoring and support system.</p>
<p>One crucial step is to investigate how to communicate information from our model output to individuals. Our models give us predicted probabilities of a lapse. One option would be to create thresholds for what constitutes low, medium, or high risk and relay current and future risk information to the individual.</p>
<p>Another option would be to anchor the predicted probability to the individual. For example, is their risk higher or lower compared to the previous week.</p>
<p>But another thing our model’s give us are the most important features driving that lapse prediction. We could imagine contextualizing lapse risk by alerting individuals to the most important predictor of their risk or using domain expertise to provide specific recommendations for recovery engagement.</p>
<p>In a recently funded grant in our lab, we plan to look what combination of risk-relevant information lead to optimal engagement and clinical recovery outcomes.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="current-future-directions-2" class="slide level2">
<h2>Current Future Directions</h2>
<ul>
<li><p>Improve our models by adding more diverse training data</p></li>
<li><p>Optimize the delivery of risk-relevant feedback</p></li>
<li><p>Combine EMA with other digital data (e.g., geolocation)</p></li>
</ul>
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/phones.png?raw=true" class="absolute" style="bottom: 10px; right: 420px; height: 40%; "></p>
<aside class="notes">
<p>Finally, we have begun to build models that combing EMA with data from other lower burden sensing methods, like geolocation and cellular communications. Including these types of digital data could increase the number of features for better personalization of support recommendations without increasing burden.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="acknowledgements" class="slide level2">
<h2>Acknowledgements</h2>
<div class="columns">
<div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<p>Contributors:</p>
<ul>
<li>John J. Curtin, PI</li>
<li>Gaylen Fronk</li>
<li>Jiachen Yu</li>
<li>Sarah Sant’Ana</li>
<li>Claire Punturieri</li>
<li>Susan Wanta</li>
<li>Madison Herrmann</li>
<li>Colin Maggard</li>
</ul>
</div><div class="column" style="width:45%;">
<p><span style="font-size: 30px;">Study Website:</span></p>
<p><img data-src="https://github.com/KendraPaquette/presentations/blob/main/images/qr.png?raw=true" class="absolute" style="bottom: 280px; right: 300px; height: 30%; "></p>
<p><br>
<br>
<br>
<br>
<br>
</p>
<p><span style="font-size: 30px;">This research was supported by NIAAA R01 AA024391 to John J. Curtin</span></p>
</div><div class="column" style="width:5%;">

</div></div>
<aside class="notes">
<p>I would like to thank all of the people who have contributed to the ideas and research presented today.</p>
<p>The QR code on the screen links to our study website where we have made the manuscript and all annotated analysis scripts available.</p>
<p>I’m happy to answer any questions now.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="arc_logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Collaborative Perspectives on Addiction 2025</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="CPA_2025_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="CPA_2025_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="CPA_2025_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="CPA_2025_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="CPA_2025_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="CPA_2025_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="CPA_2025_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="CPA_2025_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="CPA_2025_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="CPA_2025_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>